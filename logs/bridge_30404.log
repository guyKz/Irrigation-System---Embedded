2025-11-03 18:19:18 [INFO] __main__: ============================================================
2025-11-03 18:19:18 [INFO] __main__: SMART IRRIGATION SYSTEM - TINKERCAD TO THINGSBOARD BRIDGE
2025-11-03 18:19:18 [INFO] __main__: ============================================================
2025-11-03 18:19:18 [INFO] __main__: Started at: 2025-11-03 18:19:18
2025-11-03 18:19:18 [INFO] __main__: Log file: C:\Users\krzor\Desktop\irrigation last bridge\logs\bridge_30404.log
2025-11-03 18:19:18 [INFO] __main__: ============================================================
2025-11-03 18:19:18 [INFO] __main__: Starting Smart Irrigation Bridge...
2025-11-03 18:19:18 [INFO] __main__: Initializing components...
2025-11-03 18:19:18 [INFO] thingsboard_client: ThingsBoard client initialized: https://eu.thingsboard.cloud
2025-11-03 18:19:18 [INFO] thingsboard_client: Telemetry endpoint: https://eu.thingsboard.cloud/api/v1/9CHMtFJbaOCWB7p96XmC/telemetry
2025-11-03 18:19:18 [INFO] data_processor: Data processor initialized
2025-11-03 18:19:18 [INFO] thingsboard_client: Testing ThingsBoard connection...
2025-11-03 18:19:18 [INFO] thingsboard_client: ✓ ThingsBoard connection successful
2025-11-03 18:19:18 [INFO] __main__: Starting browser automation...
2025-11-03 18:19:24 [INFO] browser_automation: TinkerCAD automation initialized
2025-11-03 18:19:24 [INFO] browser_automation: Navigating to TinkerCAD...
2025-11-03 18:19:24 [INFO] browser_automation: Circuit URL: https://www.tinkercad.com/things/hTrSolRa4D1-smooth-jaiks-borwo/editel?returnTo=https%3A%2F%2Fwww.tinkercad.com%2Fdashboard%2Fdesigns%2Fcircuits&sharecode=WyCaIdMpHj_ctZyKmGF_-gRhH7uQz4xmHD_nGaFIFyM
2025-11-03 18:19:27 [INFO] browser_automation: Attempting login...
2025-11-03 18:19:36 [INFO] browser_automation: Waiting for login to complete...
2025-11-03 18:19:41 [INFO] browser_automation: Navigating to circuit after login...
2025-11-03 18:19:44 [INFO] browser_automation: ✓ Login successful and navigated to circuit
2025-11-03 18:19:44 [INFO] browser_automation: Setting up simulation environment...
2025-11-03 18:19:51 [INFO] browser_automation: ✓ Simulation setup complete
2025-11-03 18:19:51 [INFO] __main__: Opening ThingsBoard dashboard...
2025-11-03 18:19:52 [INFO] __main__: ✓ Dashboard opened: https://eu.thingsboard.cloud/dashboards/all/6e1fdde0-a387-11f0-89a6-d5955492b887
2025-11-03 18:19:52 [INFO] browser_automation: Serial monitor initialized
2025-11-03 18:19:52 [INFO] __main__: ============================================================
2025-11-03 18:19:52 [INFO] __main__: BRIDGE ACTIVE - Monitoring serial output...
2025-11-03 18:19:52 [INFO] __main__: Press Ctrl+C to stop
2025-11-03 18:19:52 [INFO] __main__: ============================================================
2025-11-03 18:20:08 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:12 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:16 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:20 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:26 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:30 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:35 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:39 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:43 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:47 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:20:51 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:03 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:07 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:11 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:15 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:20 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:24 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:28 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:38 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:44 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:21:53 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:13 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:17 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:28 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:33 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:39 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:42 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:46 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:51 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:22:56 [INFO] browser_automation: Simulation reset detected
2025-11-03 18:23:00 [INFO] browser_automation: Simulation reset detected
2025-11-03 19:49:37 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:37 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:37 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:38 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:38 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:38 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:39 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:39 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:39 [WARNING] browser_automation: Error reading serial output: Locator.inner_text: Target page, context or browser has been closed
2025-11-03 19:49:39 [INFO] __main__: 
============================================================
2025-11-03 19:49:39 [INFO] __main__: Stopping bridge (Ctrl+C detected)
2025-11-03 19:49:39 [INFO] __main__: ============================================================
2025-11-03 19:49:39 [INFO] __main__: 
Runtime: 5387.7 seconds
2025-11-03 19:49:39 [INFO] __main__: Messages sent: 218
2025-11-03 19:49:39 [INFO] __main__: Average rate: 0.04 msg/s
2025-11-03 19:49:39 [INFO] __main__: Cleaning up...
2025-11-03 19:49:39 [INFO] browser_automation: Stopping simulation...
2025-11-03 19:49:39 [WARNING] browser_automation: Error stopping simulation: Locator.click: Target page, context or browser has been closed
2025-11-03 19:49:40 [CRITICAL] __main__: Critical error: BrowserContext.close: Target page, context or browser has been closed
Traceback (most recent call last):
  File "C:\Users\krzor\Desktop\irrigation last bridge\src\main.py", line 237, in main
    success = run_bridge()
  File "C:\Users\krzor\Desktop\irrigation last bridge\src\main.py", line 216, in run_bridge
    context.close()
    ~~~~~~~~~~~~~^^
  File "C:\Users\krzor\AppData\Local\Programs\Python\Python314\Lib\site-packages\playwright\sync_api\_generated.py", line 13482, in close
    return mapping.from_maybe_impl(self._sync(self._impl_obj.close(reason=reason)))
                                   ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\krzor\AppData\Local\Programs\Python\Python314\Lib\site-packages\playwright\_impl\_sync_base.py", line 115, in _sync
    return task.result()
           ~~~~~~~~~~~^^
  File "C:\Users\krzor\AppData\Local\Programs\Python\Python314\Lib\site-packages\playwright\_impl\_browser_context.py", line 620, in close
    await self._channel.send("close", None, {"reason": reason})
  File "C:\Users\krzor\AppData\Local\Programs\Python\Python314\Lib\site-packages\playwright\_impl\_connection.py", line 69, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\krzor\AppData\Local\Programs\Python\Python314\Lib\site-packages\playwright\_impl\_connection.py", line 558, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TargetClosedError: BrowserContext.close: Target page, context or browser has been closed
2025-11-03 19:49:40 [INFO] __main__: ============================================================
2025-11-03 19:49:40 [INFO] __main__: Application terminated
2025-11-03 19:49:40 [INFO] __main__: ============================================================
